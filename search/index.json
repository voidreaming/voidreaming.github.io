[{"content":"è¿™ä¸€ç³»åˆ—åšå®¢è®°å½•ç”¨ docker éƒ¨ç½² langchain-chatchat æœ¬åœ°çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿçš„å…¨éƒ¨è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å­¦ä¹ è®°å½•ã€è¸©å‘ç»éªŒã€ä»¥åŠä¼˜åŒ–æ€è·¯ã€‚\nLangchain-Chatchaté¡¹ç›®ä»‹ç» æ ¹æ®å®˜ç½‘ä»‹ç»ï¼šLangchain-Chatchat æ˜¯åŸºäº ChatGLM ç­‰å¤§è¯­è¨€æ¨¡å‹ä¸ Langchain ç­‰åº”ç”¨æ¡†æ¶å®ç°ï¼Œå¼€æºã€å¯ç¦»çº¿éƒ¨ç½²çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)å¤§æ¨¡å‹çŸ¥è¯†åº“é¡¹ç›®ã€‚\nè¿™é‡Œçš„ RAG æŠ€æœ¯æ˜¯ä¸ºäº†åœ¨é¿å…èŠ±è´¹å·¨å¤§è´¢åŠ›äººåŠ› fine-tuning çš„æƒ…å†µä¸‹åˆ©ç”¨çŸ¥è¯†åº“æé«˜å¤§è¯­è¨€æ¨¡å‹çš„å‡†ç¡®ç‡ã€‚RAG pipeline å¦‚ä¸‹å›¾ï¼š\nå‚è€ƒï¼šhttps://docs.llamaindex.ai/en/stable/getting_started/concepts/\nå…·ä½“åˆ†æï¼ŒRAG æ ¸å¿ƒæŠ€æœ¯å¯ä»¥åˆ†ä¸ºï¼š\nLoading Indexing Storing Querying Evaluation å³ï¼š\nåœ¨ loading é˜¶æ®µï¼Œstructure dataã€unstructured data æˆ–è€… api output è¢«åŠ è½½åˆ°ç»Ÿç§°ä¸º document çš„å®¹å™¨é‡Œï¼›\nindexing é˜¶æ®µå°† loading é˜¶æ®µçš„ unstructured data æ•´ç†ä¸º structured data å¹¶å°†å…¶å‘é‡åŒ–å­˜å‚¨èµ·æ¥æ–¹ä¾¿åç»­æ£€ç´¢ï¼Œå³embedding data into vector storeï¼›\nquerying é˜¶æ®µå°†æ ¹æ® query è¿”å›æœ€åˆé€‚çš„å›ç­”\næˆ‘ä»¬åç»­åˆ†æ langchain-chatchat é¡¹ç›®ä»£ç ä¼šå‘ç°ä¸Šè¿° RAG æŠ€æœ¯çš„å…·ä½“å®ç°ã€‚æœ¬ç¯‡åšå®¢å…ˆè®°å½• docker éƒ¨ç½²è¿‡ç¨‹ã€‚\nDockeréƒ¨ç½²æµç¨‹ æ ¹æ®é¡¹ç›® wiki ï¼Œç›®å‰docker é•œåƒæ–‡ä»¶å·²ç»æ›´æ–°åˆ° 0.2.10\nä»¥Â nvidia/cuda:12.1.1-cudnn8-devel-ubuntu22.04Â ä¸ºåŸºç¡€é•œåƒ è¯¥ç‰ˆæœ¬å†…ç½®å¹¶é»˜è®¤å¯ç”¨ä¸€ä¸ª Embedding æ¨¡å‹ï¼šbge-large-zh-v1.5ï¼Œå†…ç½®å¹¶é»˜è®¤å¯ç”¨Â ChatGLM3-6B éƒ¨ç½²è¯¥é•œåƒéœ€è¦æå‰å®‰è£…å¯¹åº”çš„NVIDIA é©±åŠ¨ç¨‹åºå’Œ CUDAå·¥å…·åŒ…ã€‚\nNVIDIA Container Toolkit å®‰è£…æŒ‡å— Installing the NVIDIA Container Toolkit â€” NVIDIA Container Toolkit 1.14.5 documentation ç¡®ä¿å‰ç½®åŒ…å®‰è£…å®Œæˆåå³å¯å¯åŠ¨é•œåƒã€‚\ndocker run -d --gpus all -p 80:8501 registry.cn-beijing.aliyuncs.com/chatchat/chatchat:0.2.10 é¦–æ¬¡æ‹‰å–é•œåƒéœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå»ºè®®å–èŒ¶ç­‰å¾…ã€‚\næ‹‰å–å®ŒæˆåæŸ¥çœ‹é•œåƒä¿¡æ¯\n~$ docker images REPOSITORY TAG IMAGE ID CREATED SIZE registry.cn-beijing.aliyuncs.com/chatchat/chatchat 0.2.10 ca7876ea20ca 4 days ago 50.1GB getting-started latest ae9abf3b3b10 3 months ago 552MB voidreaming/getting-started latest ae9abf3b3b10 3 months ago 552MB \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; 689e5f5388f9 3 months ago 552MB ubuntu latest 174c8c134b2a 3 months ago 77.9MB alpine 3.16.3 bfe296a52501 17 months ago 5.54MB æŸ¥çœ‹å®¹å™¨ä¿¡æ¯\n~$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES ece84213a897 registry.cn-beijing.aliyuncs.com/chatchat/chatchat:0.2.10 \u0026#34;python3 /data/modelâ€¦\u0026#34; 5 hours ago Up 4 hours 22/tcp, 7861/tcp, 0.0.0.0:80-\u0026gt;8501/tcp, :::80-\u0026gt;8501/tcp goofy_torvalds ä¸Šè¿°å‘½ä»¤ä¸­çš„ -p 80:8501 æŠŠé¡¹ç›® Chatchat WEBUI Server: [http://0.0.0.0:8501](http://0.0.0.0:8501/) æ˜ å°„åˆ°äº†æœåŠ¡å™¨é»˜è®¤ 80 ç«¯å£ï¼Œéƒ¨ç½²æˆåŠŸååœ¨æµè§ˆå™¨æ‰“å¼€æœåŠ¡å™¨åœ°å€å³å¯çœ‹åˆ°èŠå¤©çª—å£ã€‚\nå¦å¤–API æœåŠ¡ è®¿é—® http://localhost:7861/docsÂ å‘ç‚¹ Driver ç‰ˆæœ¬ ç”±äºä»¥æœ¬é¡¹ç›®é•œåƒä»¥Â nvidia/cuda:12.1.1-cudnn8-devel-ubuntu22.04Â ä¸ºåŸºç¡€é•œåƒï¼Œå…¶ä¸­ 12.*ç‰ˆæœ¬çš„ cuda å¯¹äº driver ç‰ˆæœ¬æœ‰ç‰¹å®šè¦æ±‚ã€‚å‚è€ƒhttps://docs.nvidia.com/cuda/cuda-toolkit-release-notes/ æœ€å¼€å§‹è«åå…¶å¦™æ‰€æœ‰æ¨¡å‹éƒ½è·‘åœ¨cpu ä¸Šï¼ŒèŠ±äº†å¥½é•¿æ—¶é—´æ‰æ’æŸ¥å‡ºè¿™ä¸ªé—®é¢˜ TT\nå­¦ä¹ å½’çº³ éƒ¨ç½²è¿‡ç¨‹ä¸­äº†è§£åˆ°äº†\nå¦‚ä½•ç”¨ remote-sshè¿æ¥æœåŠ¡å™¨ã€‚ docker åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚ æœåŠ¡å™¨åŸºæœ¬ç»´æŠ¤å’Œä½¿ç”¨ã€‚ vscode docker æ’ä»¶æ‰“å¼€å®¹å™¨è¿›è¡Œç¼–è¾‘ã€‚ driver å’Œ cuda ç‰ˆæœ¬ç›¸äº’é™åˆ¶å…³ç³»ã€‚ åç»­ä¼šå†™åšå®¢ä¾æ¬¡è®°å½•è¿™äº›æŠ€æœ¯ç‚¹ã€‚\n","date":"2024-04-09T22:44:04+08:00","image":"http://localhost:1313/p/docker%E9%83%A8%E7%BD%B2langchain-chatchat/e9e3a5e09211f2b6940cc15ad5b0f04e_hu02aa61ae1d9de35cbe238d2676170cb9_110343_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/docker%E9%83%A8%E7%BD%B2langchain-chatchat/","title":"Dockeréƒ¨ç½²Langchain-Chatchat"},{"content":" å…³äºåœ¨Macosç³»ç»Ÿä¸‹æ“ä½œç³»ç»Ÿå®éªŒç¯å¢ƒæ­å»ºçš„è®°å½•ã€‚å­¦æ ¡çš„OSå®éªŒä»¿ç…§mit6.s081 å®éªŒï¼Œæ‰€ä»¥èµ„æ–™å¤§å¤šå‚è€ƒç½‘ä¸Šå…³äºmit6.s081 labçš„å®éªŒå®‰è£…RISC-Vç¼–è¯‘å™¨å’Œå·¥å…·é“¾ã€‚\næ³¨æ˜ï¼šæœ¬å®éªŒé»˜è®¤é…ç½®å¥½äº† vscode ã€ homegrewã€ git ç­‰å·¥å…·ã€‚\nå…³äºRISC-Vç¼–è¯‘å™¨å’Œå·¥å…·é“¾çš„ä»‹ç»ã€‚ 2022 å¹´6æœˆ22æ—¥ä¸¾è¡Œ WWDCå®£å¸ƒMac ç”µè„‘çš„ CPU æ¶æ„å°†ä» Intel çš„ x86 æ¶æ„æ¢æˆ Arm æ¶æ„ï¼Œè‡ªæ­¤ï¼ŒMac å’Œ iPhone ä»¥åŠ ipad ä½¿ç”¨åŒæ ·çš„æ¶æ„ï¼Œç»Ÿä¸€äº†æ“ä½œç³»ç»Ÿã€‚\nRISC-V æ˜¯ä¸€ä¸ªå¼€æºçš„ç²¾ç®€æŒ‡ä»¤é›†ï¼Œå…¶ç›¸å¯¹äºä¸»æµçš„æ–°x86 å’Œ ARM å¤„ç†å™¨æ¶æ„è€Œè¨€æ›´ä¸ºç®€å•ã€‚RISC-V çš„åŸºç¡€æŒ‡ä»¤åªæœ‰å››åå¤šæ¡ï¼Œå¦å¤–æ›´é‡è¦çš„ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯ä¸æœ¬å®éªŒæ¯æ¯ç›¸å…³çš„ä¸€ç‚¹å°±æ˜¯ RISC-V æ‹¥æœ‰å®Œæ•´çš„å·¥å…·é“¾ï¼Œå¼€å‘äººå‘˜é€šè¿‡å·¥å…·è¿=é“¾ä¸ cpu è¿›è¡Œäº¤äº’ï¼ŒRISC-Vç¤¾åŒºå·²ç»æä¾›äº†å®Œæ•´çš„å·¥å…·é“¾ï¼Œå¹¶ä¸”RISC-VåŸºé‡‘ä¼šæŒç»­ç»´æŠ¤è¯¥å·¥å…·é“¾ã€‚å½“å‰RISC-Vçš„æ”¯æŒå·²ç»åˆå¹¶åˆ°ä¸»è¦çš„å·¥å…·ä¸­ï¼Œæ¯”å¦‚ç¼–è¯‘å·¥å…·é“¾gcc, ä»¿çœŸå·¥å…·qemuç­‰ï¼Œæœ¬æ¬¡å®éªŒä¹Ÿä¼šé…ç½®è¿™äº›å·¥å…·é“¾ã€‚\nå®‰è£…RISC-V GNU Compiler Toolchain æ ¹æ®å®˜ç½‘ä»‹ç»ï¼ŒRISC-V GNU Compiler Toolchain æ˜¯ RISC-V C å’Œ C++ äº¤å‰ç¼–è¯‘å™¨ã€‚å®ƒæ”¯æŒä¸¤ç§ç¼–è¯‘æ¨¡å¼ï¼šé€šç”¨çš„ ELF/Newlib å·¥å…·é“¾å’Œæ›´å¤æ‚çš„ Linux-ELF/glibc å·¥å…·é“¾ã€‚\nä¸‹è½½æºç ï¼š\ngit clone --recursive https://github.com/riscv/riscv-gnu-toolchain æ¸©é¦¨æç¤ºï¼šè€—æ—¶è¿‡é•¿ï¼Œå¤§çº¦åŠå°æ—¶ï¼Œå»ºè®®å–èŒ¶ç­‰å¾…ã€‚\næŒ‰ç…§å®˜æ–¹æ–‡æ¡£ï¼Œæ¥ä¸‹æ¥æ„å»º Newlib äº¤å‰ç¼–è¯‘å™¨ã€‚æ³¨æ„åˆ°æŒ‡å®šå®‰è£…è·¯å¾„\n./configure --prefix=/usr/local/opt/riscv-gnu-toolchain #é…ç½®äº§ç‰©è·¯å¾„ make #ç¼–è¯‘æŒ‡ä»¤ æ³¨ï¼š./configure: è¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„è„šæœ¬ï¼Œç”¨äºé…ç½®è½¯ä»¶åŒ…çš„å®‰è£…é€‰é¡¹ã€‚--prefix=/usr/local/opt/riscv-gnu-toolchain: è¿™ä¸ªå‚æ•°æŒ‡å®šäº†å®‰è£…è·¯å¾„ã€‚\nç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°æƒé™é—®é¢˜\n% make rm -rf stamps/build-gdb-newlib build-gdb-newlib rm: build-gdb-newlib/config.log: Permission denied rm: build-gdb-newlib: Permission denied make: *** [stamps/build-gdb-newlib] Error 1 æ­¤æ—¶ç”¨ sudo make å¯ä»¥è§£å†³é—®é¢˜ã€‚\nå¦å¤–ç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š\nconfigure: error: Building GDB requires GMP 4.2+, and MPFR 3.1.0+. Try the --with-gmp and/or --with-mpfr options to specify their locations. If you obtained GMP and/or MPFR from a vendor distribution package, make sure that you have installed both the libraries and the header files. They may be located in separate packages. make: *** [stamps/build-gdb-newlib] Error 1 æ‰‹åŠ¨å®‰è£…GMP å’Œ MPFR å³å¯ã€‚\nbrew install gmp mpfr ğŸ“è‹¥å®‰è£…ä¸Šé¢çš„åŒ…ä¹‹åç¼–è¯‘riscv-gnu-toolchainæ—¶gdbæ¨¡å—ä¾ç„¶å¤±è´¥ï¼ŒæŠ¥é”™ï¼šÂ make: *** [stamps/build-gdb-newlib] Error 2 æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¸‹è½½\nbrew install riscv64-elf-gdb https://formulae.brew.sh/formula/riscv64-elf-gdb å®‰è£…å®Œæˆåé…ç½®ç¯å¢ƒå˜é‡ã€‚\nvim ~/.zshrc #æ‰“å¼€é…ç½®æ–‡ä»¶ export PATH=\u0026#34;$PATH:/usr/local/opt/riscv-gnu-toolchain/bin\u0026#34; #æœ«å°¾æ·»åŠ æ­¤è¡Œ source ~/.zshrc #ä½¿é…ç½®ç”Ÿæ•ˆ æ­¤æ—¶åœ¨å‘½ä»¤è¡Œè¾“å…¥riscv64-unknown-elf-gcc -vï¼Œå¦‚æœèƒ½æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯åˆ™ä»£è¡¨å®‰è£…æˆåŠŸã€‚\n% riscv64-unknown-elf-gcc -v Using built-in specs. COLLECT_GCC=riscv64-unknown-elf-gcc COLLECT_LTO_WRAPPER=/usr/local/opt/riscv-gnu-toolchain/libexec/gcc/riscv64-unknown-elf/13.2.0/lto-wrapper Target: riscv64-unknown-elf Configured with: /Users/nyota/Documents/03_study/C_II/OS_experiment/riscv-gnu-toolchain/gcc/configure --target=riscv64-unknown-elf --prefix=/usr/local/opt/riscv-gnu-toolchain --disable-shared --disable-threads --enable-languages=c,c++ --with-pkgversion=gc891d8dc23e1 --with-system-zlib --enable-tls --with-newlib --with-sysroot=/usr/local/opt/riscv-gnu-toolchain/riscv64-unknown-elf --with-native-system-header-dir=/include --disable-libmudflap --disable-libssp --disable-libquadmath --disable-libgomp --disable-nls --disable-tm-clone-registry --src=.././gcc --disable-multilib --with-abi=lp64d --with-arch=rv64imafdc --with-tune=rocket --with-isa-spec=20191213 \u0026#39;CFLAGS_FOR_TARGET=-Os -mcmodel=medlow\u0026#39; \u0026#39;CXXFLAGS_FOR_TARGET=-Os -mcmodel=medlow\u0026#39; Thread model: single Supported LTO compression algorithms: zlib gcc version 13.2.0 (gc891d8dc23e1) å®‰è£… QEMU QEMUæ˜¯ä¸€ä¸ªé€šç”¨çš„å¼€æºæœºå™¨æ¨¡æ‹Ÿå™¨å’Œè™šæ‹ŸåŒ–å™¨ï¼Œç”¨äºåœ¨ ARM æ¶æ„ä¸Šæ¨¡æ‹ŸRISC-Væ¶æ„çš„CPU\nç›´æ¥é€šè¿‡ brew å®‰è£…å³å¯\nbrew install qemu æœ€åä¸‹è½½xv6 æºç  git clone git@github.com:mit-pdos/xv6-riscv.git æ³¨æ„xv6-riscv-fall19å·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œæ‰€ä»¥è¦ä»https://github.com/mit-pdos/xv6-riscvä¸‹è½½ã€‚\nåœ¨é¡¹ç›®ç›®å½•ä¸‹ç¼–è¯‘ï¼Œå¦‚æœèƒ½è¿›å…¥xv6çš„shellåˆ™è¡¨ç¤ºå®éªŒç¯å¢ƒå·²æ­å»ºæˆåŠŸ.\nmake make qemu åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»å®Œæˆç¯å¢ƒçš„é…ç½®ï¼Œå¯ä»¥å¼€å§‹è°ƒè¯•ä»£ç å•¦ï½ğŸ‘‹\n","date":"2024-04-05T12:20:01+08:00","image":"http://localhost:1313/p/mit6.s081-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F01-risc-v%E5%92%8Cxv6%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/img_hu02aa61ae1d9de35cbe238d2676170cb9_200253_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/mit6.s081-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F01-risc-v%E5%92%8Cxv6%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","title":"[mit6.s081] æ“ä½œç³»ç»Ÿ01-risc-vå’Œxv6ç¯å¢ƒæ­å»º"},{"content":"Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries.\nIn this example we will be using KaTeX Create a partial under /layouts/partials/math.html Within this partial reference the Auto-render Extension or host these scripts locally. Include the partial in your templates like so: {{ if or .Params.math .Site.Params.math }} {{ partial \u0026#34;math.html\u0026#34; . }} {{ end }} To enable KaTex globally set the parameter math to true in a project\u0026rsquo;s configuration To enable KaTex on a per page basis include the parameter math: true in content files Note: Use the online reference of Supported TeX Functions Examples Inline math: $\\varphi = \\dfrac{1+\\sqrt5}{2}= 1.6180339887â€¦$\nBlock math: $$ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } $$\n","date":"2019-03-08T00:00:00Z","permalink":"http://localhost:1313/p/math-typesetting/","title":"Math Typesetting"},{"content":"Emoji can be enabled in a Hugo project in a number of ways.\nThe emojify function can be called directly in templates or Inline Shortcodes .\nTo enable emoji globally, set enableEmoji to true in your site\u0026rsquo;s configuration and then you can type emoji shorthand codes directly in content files; e.g.\nğŸ™ˆ :see_no_evil: ğŸ™‰ :hear_no_evil: ğŸ™Š :speak_no_evil:\nThe Emoji cheat sheet is a useful reference for emoji shorthand codes.\nchange images finalchange images final N.B. The above steps enable Unicode Standard emoji characters and sequences in Hugo, however the rendering of these glyphs depends on the browser and the platform. To style the emoji you can either use a third party emoji font or a font stack; e.g.\n.emoji { font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols; }","date":"2019-03-05T00:00:00Z","image":"http://localhost:1313/p/emoji-support/the-creative-exchange-d2zvqp3fpro-unsplash_huf941de4769045cdfa8c9ee7036519a2a_35369_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/emoji-support/","title":"Emoji Support"}]